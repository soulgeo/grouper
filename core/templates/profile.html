{% extends "master.html" %}
{% load widget_tweaks %}
{% load partials %}
{% load static %}

{% block title %}
{{ profile.user.username }}'s profile
{% endblock title %}

{% block main %}
<div class="flex flex-row gap-8">
    <!-- Left-side profile, visible on >sm -->
    <div class="flex-col gap-4 items-center max-w-72 min-w-72 hidden md:flex">
        <div class="avatar">
            <div class="w-48 rounded-full">
                <img src="{{ profile.image_url }}" alt="{{ profile.user.username }}">
            </div>
        </div>
        <div class="flex flex-col gap-1 items-center">
            <div class="font-bold text-2xl text-center">
                <h2>{{ profile.user.first_name }} {{ profile.user.last_name }}</h2>
            </div>
            <div class="text-slate-400">
                <h3>@{{ profile.user.username }}</h3>
            </div>
        </div>
        {% if user == profile.user %}
        <a href="{% url 'edit_profile' %}" class="btn btn-primary">
            Edit profile
        </a>
        {% else %}
        {% include "includes/friend_button.html" %}
        {% endif %}
        <div class="text-md">
            <p>{{profile.bio}}</p>
        </div>
        <div class="text-sm">
            {% for interest in profile.interests.all %}
            {% include "includes/interest.html" %}
            {% endfor %}
        </div>
    </div>
    <div class="divider divider-vertical hidden md:flex"></div>
    <div class="flex flex-col gap-2 w-full">
        <!-- Top-side profile, visible on sm< -->
        <div class="flex-col gap-4 items-center flex md:hidden">
            <div class="flex flex-row gap-4 w-full items-center justify-between">
                <div class="flex flex-row gap-4">
                    <div class="avatar">
                        <div class="w-20 rounded-full">
                            <img src="{{ profile.image_url }}" alt="{{ profile.user.username }}">
                        </div>
                    </div>
                    <div class="flex flex-col gap-1 items-start justify-center">
                        <div class="font-bold text-2xl text-center">
                            <h2>{{ profile.user.first_name }} {{ profile.user.last_name }}</h2>
                        </div>
                        <div class="text-slate-400">
                            <h3>@{{ profile.user.username }}</h3>
                        </div>
                    </div>
                </div>
                <div>
                    {% if user == profile.user %}
                    <a href="{% url 'edit_profile' %}" class="btn btn-primary">
                        Edit profile
                    </a>
                    {% else %}
                    {% include "includes/friend_button.html" %}
                    {% endif %}
                </div>
            </div>
            <div class="text-md flex flex-col items-start w-full">
                <p>{{profile.bio}}</p>
            </div>
            <div class="text-sm">
                {% for interest in profile.interests.all %}
                {% include "includes/interest.html" %}
                {% endfor %}
            </div>
        </div>
        <div class="divider flex md:hidden"></div>
        {% if user == profile.user%}
        {% include "includes/post_form.html" %}
        {% endif %}
        <div class="flex-col" id="posts_body">
            {% include "includes/posts_container.html" with include_profile=True %}
        </div>
    </div>
</div>
{% endblock main %}
